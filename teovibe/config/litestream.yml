# Litestream - SQLite 실시간 복제 설정
# S3 호환 스토리지로 SQLite 데이터베이스 백업
#
# 사용법:
# 1. S3 버킷 생성 및 자격증명 설정
# 2. 환경변수 설정: LITESTREAM_ACCESS_KEY_ID, LITESTREAM_SECRET_ACCESS_KEY
# 3. litestream replicate -config config/litestream.yml
#
# Docker에서:
# Dockerfile에 litestream 설치 후 entrypoint에서 실행

dbs:
  - path: /rails/storage/production.sqlite3
    replicas:
      - type: s3
        bucket: teovibe-backups
        path: production.sqlite3
        region: ap-northeast-2
        retention: 168h  # 7일 보관

  - path: /rails/storage/production_queue.sqlite3
    replicas:
      - type: s3
        bucket: teovibe-backups
        path: production_queue.sqlite3
        region: ap-northeast-2
        retention: 72h  # 3일 보관

  - path: /rails/storage/production_cache.sqlite3
    replicas:
      - type: s3
        bucket: teovibe-backups
        path: production_cache.sqlite3
        region: ap-northeast-2
        retention: 24h  # 1일 보관
